<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head >
    <th:block th:replace="/layout :: head">

    </th:block>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
<p>
    <a class="btn btn-success" th:href="@{http://localhost:8080}">
        Back to home
    </a>
</p>
<h3 style="text-align: center">Employee</h3>
<p style="text-align: center">
    <a class="btn btn-success" th:href="@{/employee/create}">
        Add new employee
    </a>
</p>
<form th:action="@{/employee/search}">
        Search By Name: <input type="search" name="name" placeholder="Search By Name">
        <input type="submit" value="search" >
</form>

<p>
    <a th:text="${message}"></a>
</p>

<table id = "employee">
    <thead>
        <tr>
            <th >Employee ID</th>
            <th >Employee Name</th>
            <th >Employee Birthday</th>
            <th >Employee IdCard</th>
            <th >Employee Salary</th>
            <th >Employee Phone</th>
            <th >Employee Email</th>
            <th >Employee Address</th>
            <th >Position Name</th>
            <th >Education Degree Name</th>
            <th >Division Name</th>
            <th >edit</th>
            <th >Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employees : ${employeeList}">
            <td th:text="${employees.id}"></td>
            <td th:text="${employees.nameEmployee}"></td>
            <td th:text="${employees.dayOBEmployee}"></td>
            <td th:text="${employees.idCardEmployee}"></td>
            <td th:text="${employees.salaryEmployee}"></td>
            <td th:text="${employees.phoneEmployee}"></td>
            <td th:text="${employees.emailEmployee}"></td>
            <td th:text="${employees.addressEmployee}"></td>

            <td th:text="${employees.positions.namePosition}"></td>
            <td th:text="${employees.educationDegrees.nameEducationDegree}"></td>
            <td th:text="${employees.divisions.nameDivision}"></td>
<!--            <td><a th:href="@{/employee/edit/__${employees.getId()}__}">edit</a></td>-->
<!--            <td><a th:href="@{/employee/delete/__${employees.getId()}__}">delete</a></td>-->
            <td>
                <button type="button" class="btn btn-warning"><a
                        th:href="@{/employee/edit/__${employees.getId()}__}"><i style='font-size:20px' class='far'>&#xf044;</i>Edit</a>
                </button>
            </td>
<!--                <button onclick="deleteEmployee()"-->
<!--                        type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal">-->
<!--                    <i style="font-size: 20px" class="material-icons">&#xe872;</i>Delete-->
<!--                </button>-->
            <td>
                <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#exampleModal"
                        th:onclick="'javascript:deleteCustomer(' + ${employees.id} + ')'"><i style="font-size: 20px" class="material-icons">&#xe872;</i>Delete</button>
            </td>
        </tr>
        </tbody>
</table>

<!--<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header">-->
<!--                <h5 class="modal-title" id="exampleModalLabel">Delete Employee</h5>-->
<!--                <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                    <span aria-hidden="true">&times;</span>-->
<!--                </button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                Are you sure delete <span class="text-danger" th:field="*{}"></span> ?-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>-->
<!--                <button onclick="submitFormDelete()" type="button" class="btn btn-danger">Delete</button>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<form hidden id="form-delete" method="post" action="/customer">-->
<!--    <input type="text" name="action" value="delete">-->
<!--    <input type="text" name="id" id="id-customer">-->
<!--</form>-->

<!--<script>-->
<!--    function deleteEmployee(id, name) {-->
<!--        document.getElementById("id-customer").value = id;-->
<!--        document.getElementById("name-customer").innerText = name;-->
<!--        console.log(id);-->
<!--    }-->

<!--    function submitFormDelete() {-->
<!--        document.getElementById("form-delete").submit();-->
<!--    }-->
<!--</script>-->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" >Form Delete</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="color: red">
                Bạn có muốn xóa hay không?
            </div>
            <form  id="form-delete" method="post" action="/employee/delete">
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
                <input type="hidden" name="id" id="id-customer">
            </form>
        </div>
    </div>
</div>

<script>
    function deleteCustomer(id) {
        document.getElementById("id-customer").value = id;
        // document.getElementById("name-customer").innerText = nameCustomer;
    }
</script>


<div>
    <a th:href="@{'/employee'(page = ${employeeList.number - 1})}"
       th:if="${employeeList.hasPrevious()}">Previous</a>
    <span th:text="${employeeList.number + 1}"></span>
    / <span th:text="${employeeList.totalPages}"></span>
    <a th:href="@{'/employee'(page = ${employeeList.number + 1})}"
       th:if="${employeeList.hasNext()}">Next</a>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<th:block>
    <footer th:replace="/layout :: footer"></footer>
</th:block>
</body>
</html>